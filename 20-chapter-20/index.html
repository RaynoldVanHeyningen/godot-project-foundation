
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../19-chapter-19/">
      
      
        <link rel="next" href="../21-chapter-21/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Chapter 20 - The AAA Blueprint: Godot Project Foundation for Scalability & Modding</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="sky" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-20-robust-logging-debugging-utilities" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="The AAA Blueprint: Godot Project Foundation for Scalability &amp; Modding" class="md-header__button md-logo" aria-label="The AAA Blueprint: Godot Project Foundation for Scalability & Modding" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The AAA Blueprint: Godot Project Foundation for Scalability & Modding
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 20
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="The AAA Blueprint: Godot Project Foundation for Scalability &amp; Modding" class="md-nav__button md-logo" aria-label="The AAA Blueprint: Godot Project Foundation for Scalability & Modding" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The AAA Blueprint: Godot Project Foundation for Scalability & Modding
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-chapter-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 1
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-chapter-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 2
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-chapter-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 3
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-chapter-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 4
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-chapter-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 5
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-chapter-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 6
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-chapter-7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 7
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-chapter-8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 8
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-chapter-9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 9
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-chapter-10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-chapter-11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-chapter-12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../13-chapter-13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../14-chapter-14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../15-chapter-15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../16-chapter-16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 16
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../17-chapter-17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 17
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../18-chapter-18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 18
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../19-chapter-19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 19
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Chapter 20
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 20
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept-explanation-why-a-custom-logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concept Explanation: Why a Custom Logger?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concept Explanation: Why a Custom Logger?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-levels-explained" class="md-nav__link">
    <span class="md-ellipsis">
      
        Log Levels Explained:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architectural-reasoning-the-logger-autoload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural Reasoning: The Logger AutoLoad
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-mindset-notes-release-builds-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production Mindset Notes: Release Builds and Performance
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-instructions-implementing-a-custom-logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Instructions: Implementing a Custom Logger
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Instructions: Implementing a Custom Logger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-the-logger-autoload-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Create the Logger AutoLoad Script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../21-chapter-21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 21
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../22-chapter-22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 22
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../23-chapter-23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chapter 23
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept-explanation-why-a-custom-logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concept Explanation: Why a Custom Logger?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concept Explanation: Why a Custom Logger?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-levels-explained" class="md-nav__link">
    <span class="md-ellipsis">
      
        Log Levels Explained:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architectural-reasoning-the-logger-autoload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural Reasoning: The Logger AutoLoad
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-mindset-notes-release-builds-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production Mindset Notes: Release Builds and Performance
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-instructions-implementing-a-custom-logger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Instructions: Implementing a Custom Logger
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Instructions: Implementing a Custom Logger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-the-logger-autoload-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Create the Logger AutoLoad Script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="chapter-20-robust-logging-debugging-utilities">Chapter 20: Robust Logging &amp; Debugging Utilities</h1>
<h2 id="goal">Goal</h2>
<p>The goal of this chapter is to implement a flexible and configurable <strong>logging system</strong> for our Godot project. This system will be essential for development, debugging, and even post-release issue diagnosis. We will create a custom <code>Logger</code> singleton (AutoLoad), define different log levels (info, warn, error, debug), and implement conditional logging, with the ability to output messages to both the console and a file.</p>
<h2 id="concept-explanation-why-a-custom-logger">Concept Explanation: Why a Custom Logger?</h2>
<p>Godot's built-in <code>print()</code> and <code>push_error()</code>/<code>push_warning()</code> functions are useful, but they have limitations for a professional project:</p>
<ul>
<li><strong>Lack of Control</strong>: You can't easily turn off specific types of messages (e.g., all debug messages) without commenting out code.</li>
<li><strong>No Log Levels</strong>: All messages are treated equally, making it hard to filter important information from noise.</li>
<li><strong>No File Output</strong>: <code>print()</code> only goes to the console. For shipped games, you need logs saved to a file for bug reports.</li>
<li><strong>No Context</strong>: <code>print()</code> doesn't automatically include timestamps, source file, or line numbers.</li>
<li><strong>Performance</strong>: Excessive <code>print()</code> calls can impact performance, especially on release builds.</li>
</ul>
<p>A <strong>custom logging system</strong> addresses these issues:</p>
<ul>
<li><strong>Log Levels</strong>: Categorize messages by severity (e.g., <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code>).</li>
<li><strong>Filtering</strong>: Configure the logger to only show messages above a certain level (e.g., only <code>WARNING</code> and <code>ERROR</code> in release builds).</li>
<li><strong>Output Targets</strong>: Send logs to multiple destinations (console, file, network, in-game UI).</li>
<li><strong>Contextual Information</strong>: Automatically add timestamps, source script, line number, or even custom tags.</li>
<li><strong>Performance Control</strong>: In production builds, most debug/info logging can be compiled out or disabled, improving performance.</li>
</ul>
<h3 id="log-levels-explained">Log Levels Explained:</h3>
<ul>
<li><strong><code>DEBUG</code></strong>: Detailed information, typically only of interest to developers diagnosing problems.</li>
<li><strong><code>INFO</code></strong>: General information about the program's progress or state.</li>
<li><strong><code>WARNING</code></strong>: An indication that something unexpected happened, or a problem in the near future (e.g., "resource not found"), but the software is still working as expected.</li>
<li><strong><code>ERROR</code></strong>: Due to a more serious problem, the software has not been able to perform some function.</li>
<li><strong><code>CRITICAL</code></strong>: A serious error, indicating that the program itself may be unable to continue running.</li>
</ul>
<h2 id="architectural-reasoning-the-logger-autoload">Architectural Reasoning: The <code>Logger</code> AutoLoad</h2>
<p>Our <code>Logger</code> will be implemented as an <code>AutoLoad</code> singleton. This makes it globally accessible from any script, ensuring a consistent logging API across the entire project.</p>
<ul>
<li><strong>Centralized Logging</strong>: All log messages go through this single point, allowing for easy configuration and modification of logging behavior.</li>
<li><strong>Decoupled from Game Logic</strong>: Game logic simply calls <code>Logger.info("...")</code>, <code>Logger.error("...")</code>. It doesn't need to know <em>how</em> or <em>where</em> the message is logged.</li>
<li><strong>Service Locator Integration</strong>: We will register our <code>Logger</code> with the <code>ServiceLocator</code>, allowing for potential modding or replacement of the logging system itself.</li>
</ul>
<h2 id="production-mindset-notes-release-builds-and-performance">Production Mindset Notes: Release Builds and Performance</h2>
<ul>
<li><strong>Conditional Compilation</strong>: For performance, <code>DEBUG</code> level logging should ideally be compiled out or completely disabled in release builds. Godot doesn't have a direct preprocessor for GDScript like C#, but we can achieve similar results with runtime checks or by having different log level configurations.</li>
<li><strong>Asynchronous File Writing</strong>: For very high-volume logging, writing to a file synchronously can cause performance hitches. A more advanced logger might buffer logs and write them to a file on a separate thread or at intervals. For most games, synchronous writing is sufficient.</li>
<li><strong>Log File Rollover</strong>: In long-running games, log files can become huge. A professional logger often includes features to "roll over" log files (e.g., start a new log file daily, or when a certain size is reached).</li>
</ul>
<h2 id="step-by-step-instructions-implementing-a-custom-logger">Step-by-Step Instructions: Implementing a Custom <code>Logger</code></h2>
<h3 id="1-create-the-logger-autoload-script">1. Create the <code>Logger</code> AutoLoad Script</h3>
<ol>
<li>In <code>res://scripts/managers/</code>, create a new script named <code>Logger.gd</code>.</li>
<li>Ensure it <code>extends Node</code>.</li>
<li>
<p>Add the following code:</p>
<p>```gdscript</p>
<h1 id="loggergd">Logger.gd</h1>
<p>extends Node
class_name Logger # Make it globally recognizable</p>
<h1 id="autoload-singleton-for-robust-logging-with-different-levels-and-output-targets">AutoLoad singleton for robust logging with different levels and output targets.</h1>
<p>enum LogLevel {
    DEBUG,
    INFO,
    WARNING,
    ERROR,
    CRITICAL
}</p>
<h1 id="export-allows-setting-in-project-settings-autoload-or-in-editor-if-attached-to-a-scene">@export allows setting in Project Settings -&gt; AutoLoad or in editor if attached to a scene</h1>
<p>@export var current_log_level: LogLevel = LogLevel.DEBUG
@export var enable_file_logging: bool = true
@export var log_file_path: String = "user://game.log"
@export var max_log_file_size_mb: int = 5 # Max size before rotating logs</p>
<p>var _log_file: FileAccess = null</p>
<p>func _ready():
    print("Logger ready. Current level: " + LogLevel.keys()[current_log_level])
    if enable_file_logging:
        _initialize_file_logging()</p>
<pre><code># Register with ServiceLocator
ServiceLocator.register_service(Logger.get_script(), self)
ServiceLocator.register_service("Logger", self)
print("Logger registered with ServiceLocator.")
</code></pre>
<p>func _notification(what: int):
    if what == NOTIFICATION_WM_CLOSE_REQUEST:
        _close_file_logging()</p>
<p>func _initialize_file_logging():
    _close_file_logging() # Close any existing file access</p>
<pre><code># Check for log file size and rotate if necessary
if FileAccess.file_exists(log_file_path):
    var file_size = FileAccess.get_file_length(log_file_path)
    if file_size &gt; max_log_file_size_mb * 1024 * 1024:
        _rotate_log_file()

_log_file = FileAccess.open(log_file_path, FileAccess.WRITE_READ) # Open for append
if _log_file:
    _log_file.seek_end() # Go to end of file to append new logs
    _log_file.store_line("--- Log Session Started: " + Time.get_datetime_string_from_system() + " ---")
    _log_file.flush() # Ensure it's written immediately
    print("Logger: File logging enabled to: " + log_file_path)
else:
    push_error("Logger: Failed to open log file: " + log_file_path)
    enable_file_logging = false # Disable if we can't open
</code></pre>
<p>func <em>rotate_log_file():
    var old_path = log_file_path
    var timestamp = Time.get_datetime_string_from_system().replace(":", "-").replace("T", "</em>")
    var new_path = old_path.replace(".log", "_" + timestamp + ".log")</p>
<pre><code>print("Logger: Rotating log file from " + old_path + " to " + new_path)
DirAccess.rename_absolute(old_path, new_path)
</code></pre>
<p>func _close_file_logging():
    if _log_file and _log_file.is_open():
        _log_file.store_line("--- Log Session Ended: " + Time.get_datetime_string_from_system() + " ---")
        _log_file.close()
        _log_file = null</p>
<h1 id="public-logging-methods">Public logging methods</h1>
<p>func debug(message: String, context: String = ""):
    _log(LogLevel.DEBUG, message, context)</p>
<p>func info(message: String, context: String = ""):
    _log(LogLevel.INFO, message, context)</p>
<p>func warn(message: String, context: String = ""):
    _log(LogLevel.WARNING, message, context)</p>
<p>func error(message: String, context: String = ""):
    _log(LogLevel.ERROR, message, context)</p>
<p>func critical(message: String, context: String = ""):
    _log(LogLevel.CRITICAL, message, context)</p>
<h1 id="internal-logging-function">Internal logging function</h1>
<p>func _log(level: LogLevel, message: String, context: String = ""):
    if level &lt; current_log_level: # Filter by current_log_level
        return</p>
<pre><code>var timestamp = Time.get_datetime_string_from_system()
var level_str = LogLevel.keys()[level]
var formatted_message = "[%s][%s]%s %s" % [timestamp, level_str, ("[" + context + "]") if not context.is_empty() else "", message]

# Output to console
match level:
    LogLevel.ERROR, LogLevel.CRITICAL:
        push_error(formatted_message)
    LogLevel.WARNING:
        push_warning(formatted_message)
    _:
        print(formatted_message)

# Output to file
if enable_file_logging and _log_file and _log_file.is_open():
    _log_file.store_line(formatted_message)
    _log_file.flush() # Ensure it's written immediately
</code></pre>
<p>```</p>
<ul>
<li><strong><code>LogLevel</code> enum</strong>: Defines our log severity levels.</li>
<li><strong><code>@export var current_log_level</code></strong>: Allows setting the minimum log level directly in the editor or Project Settings.</li>
<li><strong><code>enable_file_logging</code>, <code>log_file_path</code>, <code>max_log_file_size_mb</code></strong>: Configurable properties for file logging.</li>
<li><strong><code>_initialize_file_logging()</code></strong>: Handles opening the log file in <code>user://</code> and basic log rotation.</li>
<li><strong><code>_rotate_log_file()</code></strong>: Renames the old log file with a timestamp.</li>
<li><strong><code>_close_file_logging()</code></strong>: Ensures the log file is properly closed on application exit.</li>
<li><strong>Public methods (<code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>, <code>critical</code>)</strong>: The API for other scripts to use.</li>
<li><strong><code>_log()</code></strong>: The internal core logic. It filters messages based on <code>current_log_level</code>, formats them with a timestamp and level, and outputs them to both console and file.</li>
<li><strong>Service Locator</strong>: Registers itself with the <code>ServiceLocator</code>.</li>
</ul>
</li>
</ol>
<h3 id="2-register-logger-as-an-autoload">2. Register <code>Logger</code> as an AutoLoad</h3>
<ol>
<li>Go to <code>Project</code> -&gt; <code>Project Settings...</code>.</li>
<li>Select the "AutoLoad" tab.</li>
<li>Click the folder icon next to "Path".</li>
<li>Navigate to <code>res://scripts/managers/Logger.gd</code> and select it.</li>
<li>For "Node Name", enter <code>Logger</code>.</li>
<li>Ensure "Enable" is checked.</li>
<li>Click "Add".</li>
<li><strong>Order Matters</strong>: Place <code>Logger</code> <em>above</em> <code>ServiceLocator</code> in the AutoLoad list. <code>Logger</code> needs to be ready first so <code>ServiceLocator</code> can use it for its own <code>print</code> statements during registration, and so <code>GameContext</code> can verify it.</li>
<li>In the <code>Logger</code> entry in the AutoLoad list, you can click its "Config" icon (wrench) to expose the <code>@export</code> variables in the Inspector. Set <code>Current Log Level</code> to <code>DEBUG</code> for now.</li>
<li>Close Project Settings.</li>
</ol>
<h3 id="3-update-gamecontext-to-verify-logger">3. Update <code>GameContext</code> to Verify <code>Logger</code></h3>
<ol>
<li>Open <code>res://scripts/core/GameContext.gd</code>.</li>
<li>
<p>Modify <code>_initialize_singletons()</code> to verify <code>Logger</code> (it should be the very first <code>AutoLoad</code> verified after <code>ServiceLocator</code> itself).</p>
<p>```gdscript</p>
<h1 id="gamecontextgd-relevant-excerpt">GameContext.gd (Relevant excerpt)</h1>
<p>func _initialize_singletons():
    # Verify ServiceLocator is loaded first (as Logger registers with it)
    if not is_instance_valid(ServiceLocator):
        push_error("GameContext: ServiceLocator AutoLoad not found or not initialized!")
        get_tree().quit()
    # print("GameContext: ServiceLocator verified.") # Logger will now print this
    Logger.info("ServiceLocator verified.", "GameContext") # Use Logger</p>
<pre><code># Verify Logger is loaded
if not is_instance_valid(Logger):
    push_error("GameContext: Logger AutoLoad not found or not initialized!")
    get_tree().quit()
Logger.info("Logger verified and registered with ServiceLocator.", "GameContext") # Use Logger

# Now register other services, using Logger for output
if is_instance_valid(InputManager):
    ServiceLocator.register_service(InputManager.get_script(), InputManager)
    ServiceLocator.register_service("InputManager", InputManager)
    Logger.info("InputManager registered with ServiceLocator.", "GameContext")
else:
    Logger.error("InputManager AutoLoad not found!", "GameContext")

if is_instance_valid(GameStateManager):
    ServiceLocator.register_service(GameStateManager.get_script(), GameStateManager)
    ServiceLocator.register_service("GameStateManager", GameStateManager)
    Logger.info("GameStateManager registered with ServiceLocator.", "GameContext")
else:
    Logger.error("GameStateManager AutoLoad not found!", "GameContext")

if is_instance_valid(DataManager):
    ServiceLocator.register_service(DataManager.get_script(), DataManager)
    ServiceLocator.register_service("DataManager", DataManager)
    Logger.info("DataManager registered with ServiceLocator.", "GameContext")
else:
    Logger.error("DataManager AutoLoad not found!", "GameContext")
</code></pre>
<p>```</p>
<ul>
<li>Notice how <code>print()</code> calls are replaced with <code>Logger.info()</code> or <code>Logger.error()</code>. The second argument is a "context" string, useful for filtering.</li>
</ul>
</li>
</ol>
<h3 id="4-replace-print-calls-with-logger-calls">4. Replace <code>print()</code> Calls with <code>Logger</code> Calls</h3>
<p>Now, go through your other scripts and replace <code>print()</code> calls with appropriate <code>Logger</code> calls. This is a crucial step for consistency.</p>
<ol>
<li>
<p><strong><code>HealthComponent.gd</code></strong>:</p>
<ul>
<li>Replace <code>print()</code> with <code>Logger.info()</code> and <code>Logger.warn()</code>/<code>Logger.error()</code></li>
<li>Use <code>get_owner_entity().name</code> as context.</li>
</ul>
<p>```gdscript</p>
<h1 id="healthcomponentgd-relevant-excerpt">HealthComponent.gd (Relevant excerpt)</h1>
<h1 id="_1">...</h1>
<p>var _health: int = 0:
    set(value):
        var old_health = _health
        _health = clampi(value, 0, health_data.max_health if health_data else 1)</p>
<pre><code>    if _health != old_health:
        health_changed.emit(_health, health_data.max_health if health_data else 1)
        if _health == 0 and old_health &gt; 0:
            died.emit()
            Logger.warn(tr("Player has died!"), get_owner_entity().name) # Use Logger.warn
</code></pre>
<h1 id="_on_entity_ready">... _on_entity_ready() ...</h1>
<pre><code>Logger.info("HealthComponent ready. Max health: " + str(health_data.max_health), get_owner_entity().name)
</code></pre>
<p>func take_damage(amount: int):
    if amount &lt;= 0: return
    if _health &gt; 0 and not _is_invulnerable:
        self.health -= amount
        Logger.info(tr("Player took {amount} damage. Current health: {health}").format({
            "amount": amount,
            "health": _health
        }), get_owner_entity().name)</p>
<pre><code>    if health_data.invulnerability_duration &gt; 0:
        _is_invulnerable = true
        _invulnerability_timer.start(health_data.invulnerability_duration)
        Logger.info(tr("Player is now invulnerable for {duration} seconds.").format({
            "duration": health_data.invulnerability_duration
        }), get_owner_entity().name)
</code></pre>
<p>func heal(amount: int):
    if amount &lt;= 0: return
    if _health &lt; health_data.max_health:
        self.health += amount
        Logger.info(tr("Player healed {amount}. Current health: {health}").format({
            "amount": amount,
            "health": _health
        }), get_owner_entity().name)</p>
<p>func _on_invulnerability_timeout():
    _is_invulnerable = false
    Logger.info(tr("Player is no longer invulnerable."), get_owner_entity().name)
```</p>
</li>
<li>
<p><strong><code>PlayerController.gd</code></strong>:</p>
<ul>
<li>Replace <code>print()</code> with <code>Logger.info()</code> and <code>Logger.error()</code></li>
<li>Use <code>get_owner_entity().name</code> as context.</li>
</ul>
<p>```gdscript</p>
<h1 id="playercontrollergd-relevant-excerpt">PlayerController.gd (Relevant excerpt)</h1>
<h1 id="_2">...</h1>
<p>func _on_entity_ready():
    super._on_entity_ready()
    if not is_instance_valid(get_owner_entity()): return</p>
<pre><code>_movement_component = get_sibling_component(MovementComponent)
if not _movement_component:
    Logger.error("No MovementComponent sibling found. Disabling.", get_owner_entity().name + "/PlayerController")
    set_process(false)
    set_physics_process(false)
    return

_health_component = get_sibling_component(HealthComponent)
if _health_component:
    _health_component.health_changed.connect(_on_health_changed)
    _health_component.died.connect(_on_died)
    Logger.info("Connected to HealthComponent signals.", get_owner_entity().name + "/PlayerController")
else:
    Logger.error("No HealthComponent sibling found.", get_owner_entity().name + "/PlayerController")

set_process_input(true)
Logger.info("PlayerController ready.", get_owner_entity().name)
</code></pre>
<h1 id="_input">... _input() ...</h1>
<pre><code>if event.is_action_just_pressed("ui_accept"):
    if _health_component:
        _health_component.take_damage(10)
    else:
        Logger.warn("Cannot take damage, HealthComponent not found.", get_owner_entity().name + "/PlayerController")

if event.is_action_just_pressed("ui_text_next"):
    var skin_component = get_sibling_component(SkinComponent) as SkinComponent
    if skin_component:
        # ... skin switching logic ...
    else:
        Logger.warn("Cannot switch skin, SkinComponent not found.", get_owner_entity().name + "/PlayerController")
</code></pre>
<p>func _on_health_changed(current_health: int, max_health: int):
    Logger.info(tr("Player Health: {current}/{max}").format({
        "current": current_health,
        "max": max_health
    }), get_owner_entity().name + "/PlayerController")</p>
<p>func _on_died():
    Logger.warn(tr("Player received 'died' signal. Handling player death!"), get_owner_entity().name + "/PlayerController")
    # ...
```</p>
</li>
<li>
<p><strong><code>Component.gd</code></strong>:</p>
<ul>
<li>Replace <code>print()</code> with <code>Logger.info()</code> and <code>push_error()</code>/<code>push_warning()</code> with <code>Logger.error()</code>/<code>Logger.warn()</code>.</li>
</ul>
<p>```gdscript</p>
<h1 id="componentgd-relevant-excerpt">Component.gd (Relevant excerpt)</h1>
<h1 id="_3">...</h1>
<p>func _on_entity_ready():
    # ...
    if owner is Entity:
        _owner_entity = owner
    else:
        Logger.error("Owner of '" + name + "' is not an Entity. Expected 'Entity' but got '" + owner.get_class() + "'.", "Component")
        # ...
        return</p>
<pre><code>Logger.info("Component '" + name + "' on Entity '" + _owner_entity.name + "' is ready.", "Component")
</code></pre>
<p>func get_sibling_component(component_type: GDScript) -&gt; Component:
    if not is_instance_valid(_owner_entity):
        Logger.error("Cannot get sibling component, owner entity is invalid.", "Component")
        return null</p>
<pre><code># ...
Logger.warn("Sibling component of type " + component_type.get_class() + " not found on " + _owner_entity.name, "Component")
return null
</code></pre>
<p><code>``
*   Do similar replacements for</code>MovementComponent.gd<code>,</code>SkinComponent.gd<code>,</code>GameState.gd<code>,</code>MainMenuState.gd<code>,</code>GameplayState.gd<code>,</code>GameStateManager.gd<code>,</code>DataManager.gd<code>,</code>InputManager.gd<code>,</code>ServiceLocator.gd<code>.
*   **Important**: For</code>ServiceLocator.gd<code>and</code>Logger.gd<code>themselves, be careful.</code>Logger<code>should use</code>print()<code>for its *own* initialization messages *before* it's fully ready and registered. Once ready, it can use</code>Logger.info()<code>.</code>ServiceLocator<code>can use</code>Logger.info()<code>after</code>Logger` is registered.</p>
</li>
</ol>
<h3 id="5-test-the-logging-system">5. Test the Logging System</h3>
<ol>
<li><strong>Run the project (F5)</strong>.</li>
<li>Observe the "Output" panel. All messages should now be formatted with timestamps, log levels, and contexts.</li>
<li><strong>Check the log file</strong>:<ul>
<li>Go to your <code>user://</code> directory (as found in Chapter 17).</li>
<li>You should find a <code>game.log</code> file. Open it with a text editor.</li>
<li>Verify that all the formatted log messages are present in the file.</li>
</ul>
</li>
<li><strong>Test Log Level Filtering</strong>:<ul>
<li>Go to <code>Project -&gt; Project Settings -&gt; AutoLoad</code>.</li>
<li>Click the wrench icon next to the <code>Logger</code> entry.</li>
<li>In the Inspector, change <code>Current Log Level</code> to <code>LogLevel.WARNING</code>.</li>
<li>Run the game again. You should now only see <code>WARNING</code>, <code>ERROR</code>, and <code>CRITICAL</code> messages in the console and log file, not <code>INFO</code> or <code>DEBUG</code>.</li>
<li>Change it back to <code>LogLevel.DEBUG</code> for development.</li>
</ul>
</li>
</ol>
<h2 id="consistency-check">Consistency Check</h2>
<p>You have successfully implemented a robust, configurable logging system using a <code>Logger</code> <code>AutoLoad</code>. This system provides different log levels, outputs to both console and file, and integrates with the <code>ServiceLocator</code>. You've also refactored existing <code>print()</code> calls to use this new <code>Logger</code>, establishing a professional and consistent approach to debugging and information output throughout your project. This is invaluable for maintaining a complex game and diagnosing issues in production.</p>
<p>In the next chapter, we will discuss performance considerations and basic profiling techniques to ensure our AAA foundation remains optimized.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "navigation.expand", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>